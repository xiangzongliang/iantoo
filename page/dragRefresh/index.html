<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>iantooPercent</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,target-densitydpi = medium-dpi" />
    <link href="../../build/css/dragRefresh.css" rel="stylesheet"></head>
<body>
    <style>
        #dragContent li{
            height: 200px;
            line-height: 300px;
            background: #33b5e5;
            border-top: 2px solid #c4c4c4
        }
        #dragContent{
            background: #ffffff
        }
    </style>
    
    <div id="iantooDragRefresh">
        <div id="dragRefreshLoading"></div>
        <div id="dragContent">
            <ul>
                <li onClick="closeDownFun()">关闭下拉刷新</li>
                <li onClick="closeUpFun()">关闭上拉加载</li> 
            </ul>
        </div>
    </div> 
    

<script type="text/javascript" src="../../build/js/dragRefresh.js"></script>
<script>
    


    function closeDownFun(){
        iantoo.dragRefresh.closeDown(true);  //入参  true || false   true代表请求成功
    }
    function closeUpFun(){
        iantoo.dragRefresh.closeUp(true);
    }

    iantoo.dragRefresh({
        content:'#dragContent',     //必填
        loadingBox:'#dragRefreshLoading',   //必填
        // downDragText:'刷新中...',
        // upDragText:'数据加载中...',
        downTextColor:'#ff3300',    //下拉刷新的文字颜色        默认 #9c9c9c
        upTextColor:'#9c9c9c',          //上拉加载的文字颜色    默认 #9c9c9c
        downRefresh:function(){     //拉动到了一定距离出发了下拉刷新功能
            console.log('触发了下拉刷新')
            //downRefresh、upRefresh方法一旦被触发,必须在调用对应的关闭之后才能第二次触发
        },
        upRefresh:function(){ //触发了上拉加载
            console.log('触发了上拉加载')
        },
        closeDown:function(){
            //关闭了下拉刷新
        },
        closeUp:function(){
            //关闭了上拉加载
        }
    })


    //测试异步加载的数据
    setTimeout(function(){
        document.querySelector('#dragContent').innerHTML = `
        <ul>
                <li onClick="closeDownFun()">关闭下拉刷新</li>
                <li>3211111132</li>
                <li>763281678216373y721h8</li>
                <li>u321j32i1j</li>
                <li>dnjadnjakndjakld</li>
                <li>dnjsandjsandjska</li>
                <li>ndjsknvjknvjfka</li>
                <li>ncjskjfdksnvjkfdsv</li>
                <li>ncjdsalnejdknajke</li>
                <li onClick="closeUpFun()">关闭上拉加载</li> 
            </ul>
        `

    },3000)

    //扩展方法
    /**
     * iantoo.dragRefresh.closeDown(); //关闭下拉刷新
     * iantoo.dragRefresh.closeUp();    //关闭上拉加载
     * iantoo.dragRefresh.close();      //关闭所有加载，会先后调用closeDown 和 closeUp
     * 
     * //在页面中需要更新的参数,下面是所有的支持的更新的参数
     * iantoo.dragRefresh.updata({
     *      downDragText:'更新后的下拉刷新文字...',
     *      upDragText:'更新之后的上拉加载的文字...',
     *      downTextColor:'#33b5e5',    //更新下拉刷新的文字颜色
     *      upTextColor:'#33b5e5',      //更新上拉加载的文字颜色
     * })
     */

</script>
</body>
</html>